(function(t){function e(e){for(var o,a,l=e[0],c=e[1],s=e[2],u=0,h=[];u<l.length;u++)a=l[u],i[a]&&h.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);p&&p(e);while(h.length)h.shift()();return n.push.apply(n,s||[]),r()}function r(){for(var t,e=0;e<n.length;e++){for(var r=n[e],o=!0,a=1;a<r.length;a++){var c=r[a];0!==i[c]&&(o=!1)}o&&(n.splice(e--,1),t=l(l.s=r[0]))}return t}var o={},i={app:0},n=[];function a(t){return l.p+"js/"+({about:"about"}[t]||t)+"."+{about:"c21bc2bc"}[t]+".js"}function l(e){if(o[e])return o[e].exports;var r=o[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.e=function(t){var e=[],r=i[t];if(0!==r)if(r)e.push(r[2]);else{var o=new Promise(function(e,o){r=i[t]=[e,o]});e.push(r[2]=o);var n,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=a(t),n=function(e){c.onerror=c.onload=null,clearTimeout(s);var r=i[t];if(0!==r){if(r){var o=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src,a=new Error("Loading chunk "+t+" failed.\n("+o+": "+n+")");a.type=o,a.request=n,r[1](a)}i[t]=void 0}};var s=setTimeout(function(){n({type:"timeout",target:c})},12e4);c.onerror=c.onload=n,document.head.appendChild(c)}return Promise.all(e)},l.m=t,l.c=o,l.d=function(t,e,r){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)l.d(r,o,function(e){return t[e]}.bind(null,o));return r},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/",l.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var p=s;n.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("cd49")},"034f":function(t,e,r){"use strict";var o=r("0ffe"),i=r.n(o);i.a},"0cc1":function(t,e,r){},"0ffe":function(t,e,r){},"18ae":function(t,e,r){"use strict";var o=r("cdc7"),i=r.n(o);i.a},"1e3d":function(t,e,r){},"21af":function(t,e,r){},"2c97":function(t,e,r){"use strict";var o=r("21af"),i=r.n(o);i.a},"2db8":function(t,e,r){},"343d":function(t,e,r){"use strict";var o=r("b4e8"),i=r.n(o);i.a},3715:function(t,e,r){"use strict";var o=r("1e3d"),i=r.n(o);i.a},"5f67":function(t,e,r){},"80d6":function(t,e,r){},8630:function(t,e,r){},9025:function(t,e,r){"use strict";var o=r("80d6"),i=r.n(o);i.a},b4e8:function(t,e,r){},b8b5:function(t,e,r){"use strict";var o=r("c838"),i=r.n(o);i.a},c1dd:function(t,e,r){},c298:function(t,e,r){"use strict";var o=r("0cc1"),i=r.n(o);i.a},c838:function(t,e,r){},cd49:function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},n=[],a=(r("034f"),r("0c7c")),l={},c=Object(a["a"])(l,i,n,!1,null,null,null),s=c.exports,u=r("8c4f"),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("div",{staticClass:"controls"},[r("button",{on:{click:t.clear}},[t._v("CLEAR")])]),r("div",{staticClass:"main"},[r("TripletsView",{attrs:{cubeTriplet1:t.cubeTriplet1,tripletColor1:t.tripletColor1,cubeTriplet2:t.cubeTriplet2,tripletColor2:t.tripletColor2}}),r("FridrihView",{staticStyle:{"margin-top":"50px"}})],1)])},h=[],v=r("d225"),d=r("b0b4"),f=r("308d"),b=r("6bb5"),g=r("4e2b"),C=r("9ab4"),m=r("4bb5"),y=r("60a3"),O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"triplet-view"},[r("TripletGroup",{attrs:{tripletImage:t.cubeTriplet1,tripletColor:t.tripletColor1,index:0},on:{click:t.openVideo}}),r("TripletGroup",{attrs:{tripletImage:t.cubeTriplet2,tripletColor:t.tripletColor2,index:1},on:{click:t.openVideo}}),r("WebcamModal",{ref:"webcam",attrs:{show:t.isShow},on:{close:function(e){t.isShow=!1}}})],1)},j=[],w=r("795b"),k=r.n(w),x=(r("96cf"),r("3b8d")),S=r("f28b"),T=(r("6aa2"),r("28a5"),function t(e,r){Object(v["a"])(this,t),this.x=e,this.y=r}),_=function(){function t(e){Object(v["a"])(this,t),this.points=this.points2arr(e),this.mat=e}return Object(d["a"])(t,[{key:"getMat",value:function(){return this.mat}},{key:"getPoint",value:function(t){return new T(this.points[2*t+0],this.points[2*t+1])}},{key:"points2arr",value:function(t){for(var e=[],r=0;r<48;r+=4)e.push(t.data[r]);return e}}]),t}(),z=function t(e,r,o){Object(v["a"])(this,t),this.left=e,this.right=r,this.top=o},M=function t(e){var r=e.left,o=e.right,i=e.top;Object(v["a"])(this,t),this.left=r,this.right=o,this.top=i},R=function(){function t(e){Object(v["a"])(this,t),this.data="",this.data=e}return Object(d["a"])(t,[{key:"reverse",value:function(){return new t(this.data.split(" ").reverse().join(" "))}},{key:"toString",value:function(){return this.data}}]),t}();function P(t,e,r){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=e*r,n=new Uint8ClampedArray(i),a=0;a<i;a+=1)n[a]=Math.round(255*t[2*a+o]);return cv.matFromArray(e,r,cv.CV_8UC1,n)}function $(t){var e=E(t,.5),r=new cv.MatVector,o=new cv.Mat;if(cv.findContours(e,r,o,cv.RETR_CCOMP,cv.CHAIN_APPROX_SIMPLE),0===r.size())return e.delete(),r.delete(),o.delete(),null;var i=new cv.MatVector,n=new cv.Mat,a=r.get(0),l=.03*cv.arcLength(a,!0);return cv.approxPolyDP(a,n,l,!0),i.push_back(n),e.delete(),r.delete(),o.delete(),6!==n.rows?null:new _(n)}function I(t){var e=E(t,.5),r=new cv.MatVector,o=new cv.Mat;if(cv.findContours(e,r,o,cv.RETR_CCOMP,cv.CHAIN_APPROX_SIMPLE),1!==r.size())return e.delete(),r.delete(),o.delete(),null;var i=r.get(0),n=cv.boundingRect(i),a=new cv.Point(Math.round(n.x+n.width/2),Math.round(n.y+n.height/2));return a}function E(t,e){var r=new cv.Mat;return t.convertTo(r,cv.CV_8U),cv.threshold(r,r,Math.round(255*e),255,cv.THRESH_BINARY),r}function A(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:256,o=new cv.Mat,i=cv.matFromArray(4,1,cv.CV_32FC2,e),n=cv.matFromArray(4,1,cv.CV_32FC2,[0,0,r,0,r,r,0,r]),a=new cv.Size(r,r),l=cv.getPerspectiveTransform(i,n);return cv.warpPerspective(t,o,l,a,cv.INTER_LINEAR,cv.BORDER_CONSTANT,new cv.Scalar),l.delete(),i.delete(),n.delete(),o}function V(t,e){for(var r,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,n=[t.getPoint(1),e],a=[t.getPoint(2),t.getPoint(3)],l=[t.getPoint(2),t.getPoint(1)],c=[t.getPoint(3),e],s=[t.getPoint(1),e],u=[t.getPoint(0),t.getPoint(5)],p=[t.getPoint(1),t.getPoint(0)],h=[e,t.getPoint(5)],v=[e,t.getPoint(5)],d=[t.getPoint(3),t.getPoint(4)],f=[e,t.getPoint(3)],b=[t.getPoint(5),t.getPoint(4)],g=[[n,a],[l,c],[s,u],[p,h],[v,d],[f,b]],C=0;C<g.length;C++){var m=g[C];if(r=N(m[0][0],m[0][1]),o=N(m[1][0],m[1][1]),!F(r,o,i))return!1}return!0}function D(t,e){var r=new cv.MatVector;r.push_back(e.getMat());var o=new cv.Scalar(212,130,226);cv.drawContours(t,r,0,o,1,cv.LINE_8),r.delete()}function U(t,e,r){var o=new cv.Scalar(212,130,226);cv.circle(t,e,r,o,-1)}function N(t,e){var r=e.x-t.x,o=e.y-t.y;return 180*Math.atan2(-o,r)/Math.PI}function F(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.abs(t-e)<=r}Object(S["a"])(Error);var G=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(Object(S["a"])(Error)),L=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(Object(S["a"])(Error)),q=function(){function t(e){Object(v["a"])(this,t),this.isInit=!1,this.src=new cv.Mat,this.dst=new cv.Mat,this.config=e}return Object(d["a"])(t,[{key:"init",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tf.loadModel(this.config.segmentationModelPath);case 2:this.model=t.sent,this.isInit=!0,console.log("tf model loaded!");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"clear",value:function(){this.src.delete(),this.dst.delete()}},{key:"predict",value:function(t){var e=this,r=this.config.segmentationModelInputSize,o=new cv.Size(r,r);return new k.a(function(){var i=Object(x["a"])(regeneratorRuntime.mark(function i(n,a){var l,c,s,u,p,h,v,d,f,b,g,C,m,y,O;return regeneratorRuntime.wrap(function(i){while(1)switch(i.prev=i.next){case 0:return e.dst=new cv.Mat,cv.resize(t,e.src,o,0,0,cv.INTER_AREA),cv.cvtColor(e.src,e.dst,cv.COLOR_RGBA2GRAY,0),l=tf.tensor3d(e.dst.data,[r,r,1]),c=l.expandDims(0),s=c.toFloat().div(255),u=e.model.predict(s),i.next=9,u.data();case 9:if(p=i.sent,h=P(p,r,r,0),v=P(p,r,r,1),d=$(h),null!==d&&(h=cv.Mat.zeros(h.cols,h.rows,cv.CV_8UC3),D(h,d)),f=I(v),null!==f&&(v=cv.Mat.zeros(v.cols,v.rows,cv.CV_8UC3),U(v,f,3)),b=cv.Mat.zeros(v.cols,v.rows,cv.CV_8UC3),g=cv.Mat.zeros(v.cols,v.rows,cv.CV_8UC3),C=cv.Mat.zeros(v.cols,v.rows,cv.CV_8UC3),null===d||null===f){i.next=28;break}return V(d,f,e.config.maxHexagonAngle)||a(new G),m=[d.getPoint(1).x,d.getPoint(1).y,f.x,f.y,d.getPoint(3).x,d.getPoint(3).y,d.getPoint(2).x,d.getPoint(2).y],y=[d.getPoint(0).x,d.getPoint(0).y,d.getPoint(5).x,d.getPoint(5).y,f.x,f.y,d.getPoint(1).x,d.getPoint(1).y],O=[f.x,f.y,d.getPoint(5).x,d.getPoint(5).y,d.getPoint(4).x,d.getPoint(4).y,d.getPoint(3).x,d.getPoint(3).y],b=A(e.src,m,r),g=A(e.src,y,r),C=A(e.src,O,r),i.abrupt("return",n({maskData:h,centerData:v,leftData:b,topData:g,rightData:C}));case 28:a(new L);case 29:case"end":return i.stop()}},i)}));return function(t,e){return i.apply(this,arguments)}}())}}]),t}(),H=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"triplet-group"},[r("triplet-image",{attrs:{triplet:t.tripletImage},on:{click:t.onClick}}),r("triplet-color",{attrs:{tripletIndex:t.index,tripletColors:t.tripletColor,triplet:t.tripletImage}})],1)},W=[],B=(r("c5f6"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{on:{click:t.onClick}},[r("canvas",{ref:"left",attrs:{width:"128",height:"128"}}),r("canvas",{ref:"top",attrs:{width:"128",height:"128"}}),r("canvas",{ref:"right",attrs:{width:"128",height:"128"}})])}),J=[],X=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"draw",value:function(){if(null!==this.triplet)cv.imshow(this.$refs.left,this.triplet.left),cv.imshow(this.$refs.top,this.triplet.top),cv.imshow(this.$refs.right,this.triplet.right);else{var t=this.$refs.left.width;this.clearCanvas(this.$refs.left,t),this.clearCanvas(this.$refs.top,t),this.clearCanvas(this.$refs.right,t)}}},{key:"clearCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=t.getContext("2d");r&&r.clearRect(0,0,e,e)}},{key:"onClick",value:function(){this.$emit("click")}}]),e}(y["d"]);C["a"]([Object(y["c"])(z)],X.prototype,"triplet",void 0),C["a"]([Object(y["e"])("triplet")],X.prototype,"draw",null),X=C["a"]([Object(y["a"])({name:"TripletImage"})],X);var Y=X,K=Y,Q=(r("e5de"),Object(a["a"])(K,B,J,!1,null,"5f5176aa",null)),Z=Q.exports,tt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{display:"inline-flex"}},[r("SideStickers",{attrs:{size:128,colors:t.leftColors},on:{change:t.changeColors}}),r("SideStickers",{attrs:{size:128,colors:t.topColors},on:{change:t.changeColors}}),r("SideStickers",{attrs:{size:128,colors:t.rightColors},on:{change:t.changeColors}})],1)},et=[],rt=(r("6d67"),r("0cd8"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return 9===t.localColors.length?r("div",{staticClass:"color-cube"},t._l([0,1,2],function(e){return r("div",{key:e,staticClass:"cube-row"},t._l([0,1,2],function(o){return r("div",{key:o,staticClass:"cube-sticker"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.localColors[3*e+o],expression:"localColors[i*3 + j]"}],staticClass:"sticker-input",attrs:{type:"text"},domProps:{value:t.localColors[3*e+o]},on:{input:[function(r){r.target.composing||t.$set(t.localColors,3*e+o,r.target.value)},function(r){return t.change(3*e+o)}]}})])}),0)}),0):t._e()}),ot=[],it=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.localColors=[],t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"onColorsChange",value:function(){this.localColors=this.colors.slice(0)}},{key:"change",value:function(t){var e=this.localColors[t];return{prop:this.colors,index:t,value:e}}}]),e}(y["d"]);C["a"]([Object(y["c"])({type:Array,default:function(){return[]}})],it.prototype,"colors",void 0),C["a"]([Object(y["e"])("colors")],it.prototype,"onColorsChange",null),C["a"]([Object(y["b"])()],it.prototype,"change",null),it=C["a"]([y["a"]],it);var nt=it,at=nt,lt=(r("e3b9"),Object(a["a"])(at,rt,ot,!1,null,"2f1fa939",null)),ct=lt.exports,st=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cube",style:t.styles},t._l([0,1,2],function(e){return r("div",{key:e,staticClass:"cube-row"},t._l([0,1,2],function(o){return r("SingleSticker",{key:o,attrs:{color:t.localColors[3*e+o]},on:{click:function(r){return t.nextColor(3*e+o)}}})}),1)}),0)},ut=[],pt=(r("57e7"),r("a4bb")),ht=r.n(pt),vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"cube-sticker",style:t.styles,on:{click:function(e){return t.$emit("click")}}})},dt=[],ft=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"styles",get:function(){return{backgroundColor:this.color}}}]),e}(y["d"]);C["a"]([Object(y["c"])(String)],ft.prototype,"color",void 0),ft=C["a"]([y["a"]],ft);var bt,gt=ft,Ct=gt,mt=(r("ed08"),Object(a["a"])(Ct,vt,dt,!1,null,"8fef5532",null)),yt=mt.exports;(function(t){t[t["green"]=0]="green",t[t["red"]=1]="red",t[t["blue"]=2]="blue",t[t["orange"]=3]="orange",t[t["yellow"]=4]="yellow",t[t["white"]=5]="white"})(bt||(bt={}));var Ot=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.localColors=[],t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){this.localColors=this.colors}},{key:"nextColor",value:function(t){var e=ht()(bt).map(function(t){return bt[t]}),r=this.localColors[t],o=e.indexOf(r),i=0;o<5&&(i=o+1),this.$set(this.localColors,t,e[i]),this.$emit("change",{prop:this.colors,index:t,value:e[i]})}},{key:"onColorsChange",value:function(){console.log("change"),this.localColors=this.colors.slice(0)}},{key:"styles",get:function(){return console.log("size",this.size),{width:"".concat(this.size,"px"),height:"".concat(this.size,"px")}}}]),e}(y["d"]);C["a"]([Object(y["c"])({type:Array,default:function(){return[]}})],Ot.prototype,"colors",void 0),C["a"]([Object(y["c"])(Number)],Ot.prototype,"size",void 0),C["a"]([Object(y["e"])("colors")],Ot.prototype,"onColorsChange",null),Ot=C["a"]([Object(y["a"])({components:{SingleSticker:yt}})],Ot);var jt=Ot,wt=jt,kt=(r("18ae"),Object(a["a"])(wt,st,ut,!1,null,"6cd945ae",null)),xt=kt.exports;function St(t){return t.map(function(t,e){return[t,e]}).reduce(function(t,e){return e[0]>t[0]?e:t})[1]}var Tt=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.leftColors=[],t.rightColors=[],t.topColors=[],t.colors={0:"blue",1:"green",2:"orange",3:"red",4:"white",5:"yellow"},t.dsize=new cv.Size(32,32),t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){this.initColors()}},{key:"onTripletColorsChange",value:function(){this.initColors()}},{key:"initColors",value:function(){if(null===this.tripletColors)return this.leftColors=[],this.rightColors=[],void(this.topColors=[]);this.leftColors=this.tripletColors.left.slice(0),this.rightColors=this.tripletColors.right.slice(0),this.topColors=this.tripletColors.top.slice(0)}},{key:"changeColors",value:function(t){var e=t.prop,r=t.index,o=t.value;this.$set(e,r,o),this.setTripletColor({index:this.tripletIndex,triplet:new M({left:this.leftColors,right:this.rightColors,top:this.topColors})})}},{key:"draw",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(null===this.triplet){t.next=18;break}return console.log("Start recognize"),this.triplet.left,t.next=5,this.recognizeSide(this.triplet.left);case 5:return this.leftColors=t.sent,console.log("Recognized: ",1),t.next=9,this.recognizeSide(this.triplet.right);case 9:return this.rightColors=t.sent,console.log("Recognized: ",2),t.next=13,this.recognizeSide(this.triplet.top);case 13:this.topColors=t.sent,console.log("Recognized: ",3),this.setTripletColor({index:this.tripletIndex,triplet:new M({left:this.leftColors,right:this.rightColors,top:this.topColors})}),t.next=18;break;case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"drawTriplet",value:function(){this.drawColorSide(this.$refs.left,this.leftColors),this.drawColorSide(this.$refs.top,this.topColors),this.drawColorSide(this.$refs.right,this.rightColors)}},{key:"drawColorSide",value:function(t,e){var r=t.getContext("2d");if(null!==r)for(var o=Math.round(128/3)-1,i=0;i<3;i++)for(var n=0;n<3;n++)r.fillStyle=e[3*i+n],r.fillRect(n*o,i*o,o,o)}},{key:"recognizeSide",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(e){var r,o,i,n,a,l,c,s,u,p,h=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:Math.round(128/3)-1,o=[],i=new cv.Mat,n=0;case 4:if(!(n<3)){t.next=25;break}a=0;case 6:if(!(a<3)){t.next=22;break}return l=new cv.Rect(a*r,n*r,r,r),i=e.roi(l),cv.cvtColor(i,i,cv.COLOR_RGBA2RGB,0),c=new cv.Mat,cv.resize(i,c,this.dsize,0,0,cv.INTER_AREA),t.next=14,this.recognizeColor(c);case 14:s=t.sent,u=Array.prototype.slice.call(s),p=St(u),o.push(this.getColorName(p)),c.delete();case 19:a++,t.next=6;break;case 22:n++,t.next=4;break;case 25:return i.delete(),t.abrupt("return",o);case 27:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getColorName",value:function(t){return this.colors[t]}},{key:"clearCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=t.getContext("2d");r&&r.clearRect(0,0,e,e)}}]),e}(y["d"]);C["a"]([Object(y["c"])(z)],Tt.prototype,"triplet",void 0),C["a"]([Object(y["c"])(M)],Tt.prototype,"tripletColors",void 0),C["a"]([Object(y["c"])(Number)],Tt.prototype,"tripletIndex",void 0),C["a"]([Object(m["c"])("setTripletColor")],Tt.prototype,"setTripletColor",void 0),C["a"]([Object(m["a"])("recognizeColor")],Tt.prototype,"recognizeColor",void 0),C["a"]([Object(y["e"])("tripletColors")],Tt.prototype,"onTripletColorsChange",null),C["a"]([Object(y["e"])("triplet")],Tt.prototype,"draw",null),Tt=C["a"]([Object(y["a"])({name:"TripletColor",components:{CubeColorSide:ct,SideStickers:xt}})],Tt);var _t=Tt,zt=_t,Mt=Object(a["a"])(zt,tt,et,!1,null,null,null),Rt=Mt.exports,Pt=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"onClick",value:function(){this.$emit("click",{index:this.index})}}]),e}(y["d"]);C["a"]([Object(y["c"])(Object)],Pt.prototype,"tripletImage",void 0),C["a"]([Object(y["c"])(Object)],Pt.prototype,"tripletColor",void 0),C["a"]([Object(y["c"])(Number)],Pt.prototype,"index",void 0),Pt=C["a"]([Object(y["a"])({name:"TripletGroup",components:{TripletImage:Z,TripletColor:Rt}})],Pt);var $t=Pt,It=$t,Et=(r("d60d"),Object(a["a"])(It,H,W,!1,null,"78f203a5",null)),At=Et.exports,Vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"camera-modal",on:{mousedown:t.close}},[r("video",{attrs:{width:"400",height:"400",id:"video",controls:"",autoplay:""},on:{click:function(e){return t.snapshot(this)}}})])},Dt=[],Ut=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.imageCapture=null,t.mediaStream=null,t.ctx=document.createElement("canvas").getContext("2d"),t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){this.ctx.canvas.width=400,this.ctx.canvas.height=400}},{key:"mounted",value:function(){this.video=document.querySelector("video");var t=navigator;navigator.getUserMedia=t.getUserMedia||t.webkitGetUserMedia||t.mozGetUserMedia||t.msGetUserMedia}},{key:"onShowChange",value:function(){this.show?this.openStream():this.closeStream()}},{key:"openStream",value:function(){var t=this;navigator.getUserMedia?navigator.getUserMedia({video:{width:{min:640,ideal:640,max:800},height:{min:480,ideal:480,max:600}},audio:!1},function(e){t.mediaStream=e,null!==t.video&&(t.video.srcObject=e)},function(t){alert("The following error occured: "+t)}):alert("getUserMedia not supported")}},{key:"closeStream",value:function(){if(null!==this.mediaStream){var t=this.mediaStream.getVideoTracks()[0];t.stop()}}},{key:"close",value:function(){this.$emit("close")}},{key:"snapshot",value:function(){var t=Math.min(this.video.videoWidth,this.video.videoHeight);this.ctx.drawImage(this.video,(this.video.videoWidth-t)/2,(this.video.videoHeight-t)/2,t,t,0,0,400,400);var e=cv.matFromImageData(this.ctx.getImageData(0,0,400,400));return e}}]),e}(y["d"]);C["a"]([Object(y["c"])({type:Boolean,default:!1})],Ut.prototype,"show",void 0),C["a"]([Object(y["e"])("show")],Ut.prototype,"onShowChange",null),Ut=C["a"]([Object(y["a"])({name:"WebcamModal"})],Ut);var Nt=Ut,Ft=Nt,Gt=(r("343d"),Object(a["a"])(Ft,Vt,Dt,!1,null,"e654fc98",null)),Lt=Gt.exports,qt=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.isShow=!1,t.currentIndex=0,t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"onTripletColor1Update",value:function(){this.resolve()}},{key:"onTripletColor2Update",value:function(){this.resolve()}},{key:"mounted",value:function(){this.resolve()}},{key:"resolve",value:function(){this.resolvePuzzle()}},{key:"openVideo",value:function(t){var e=t.index;this.currentIndex=e,this.isShow=!0,this.requestFrame()}},{key:"requestFrame",value:function(){if(!1!==this.isShow){var t=this.$refs.webcam.snapshot();this.recognize(t)}}},{key:"recognize",value:function(t){var e=this;this.recognizeCube(t).then(function(t){t.maskData,t.centerData;var r=t.leftData,o=t.topData,i=t.rightData;e.isShow=!1,0===e.currentIndex?e.setCubeTriplet1({triplet:new z(r,i,o)}):e.setCubeTriplet2({triplet:new z(r,i,o)})}).catch(function(t){(t instanceof L||t instanceof G)&&e.requestFrame()})}}]),e}(y["d"]);C["a"]([Object(y["c"])(Object)],qt.prototype,"cubeTriplet1",void 0),C["a"]([Object(y["c"])(Object)],qt.prototype,"cubeTriplet2",void 0),C["a"]([Object(y["c"])(Object)],qt.prototype,"tripletColor1",void 0),C["a"]([Object(y["c"])(Object)],qt.prototype,"tripletColor2",void 0),C["a"]([Object(m["a"])("recognizeCube")],qt.prototype,"recognizeCube",void 0),C["a"]([Object(m["a"])("resolvePuzzle")],qt.prototype,"resolvePuzzle",void 0),C["a"]([Object(m["c"])("setCubeTriplet1")],qt.prototype,"setCubeTriplet1",void 0),C["a"]([Object(m["c"])("setCubeTriplet2")],qt.prototype,"setCubeTriplet2",void 0),C["a"]([Object(y["e"])("tripletColor1")],qt.prototype,"onTripletColor1Update",null),C["a"]([Object(y["e"])("tripletColor2")],qt.prototype,"onTripletColor2Update",null),qt=C["a"]([Object(y["a"])({name:"TripletsView",components:{TripletGroup:At,WebcamModal:Lt}})],qt);var Ht=qt,Wt=Ht,Bt=(r("b8b5"),Object(a["a"])(Wt,O,j,!1,null,"0be2531b",null)),Jt=Bt.exports,Xt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("video",{attrs:{width:"400",height:"400",id:"video",controls:"",autoplay:""},on:{click:function(e){return t.snapshot(this)}}}),r("div",[r("button",{on:{click:t.snapshot}},[t._v("Recognize")])])])},Yt=[],Kt=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.imageCapture=null,t.ctx=document.createElement("canvas").getContext("2d"),t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){this.ctx.canvas.width=400,this.ctx.canvas.height=400}},{key:"mounted",value:function(){var t=this,e=navigator;navigator.getUserMedia=e.getUserMedia||e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia,navigator.getUserMedia?navigator.getUserMedia({video:{width:{min:640,ideal:640,max:800},height:{min:480,ideal:480,max:600}},audio:!1},function(e){t.video=document.querySelector("video"),null!==t.video&&(t.video.srcObject=e)},function(t){alert("The following error occured: "+t)}):alert("getUserMedia not supported")}},{key:"snapshot",value:function(){var t=Math.min(this.video.videoWidth,this.video.videoHeight);this.ctx.drawImage(this.video,(this.video.videoWidth-t)/2,(this.video.videoHeight-t)/2,t,t,0,0,400,400);var e=cv.matFromImageData(this.ctx.getImageData(0,0,400,400));return this.$emit("grab",e),e}}]),e}(y["d"]);Kt=C["a"]([y["a"]],Kt);var Qt=Kt,Zt=Qt,te=Object(a["a"])(Zt,Xt,Yt,!1,null,null,null),ee=te.exports,re=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("img",{ref:"image",attrs:{src:"images/4.jpg"},on:{click:function(e){return t.snapshot(this)}}}),r("div",[r("button",{on:{click:t.snapshot}},[t._v("Recognize")])])])},oe=[],ie=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.ctx=document.createElement("canvas").getContext("2d"),t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){this.ctx.canvas.width=400,this.ctx.canvas.height=400}},{key:"mounted",value:function(){this.image=this.$refs.image}},{key:"snapshot",value:function(){var t=this.image.width,e=this.image.height,r=Math.min(t,e);this.ctx.drawImage(this.image,0,0,r,r,0,0,400,400);var o=cv.matFromImageData(this.ctx.getImageData(0,0,400,400));return this.$emit("grab",o),o}}]),e}(y["d"]);ie=C["a"]([y["a"]],ie);var ne=ie,ae=ne,le=Object(a["a"])(ae,re,oe,!1,null,null,null),ce=le.exports,se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"fridrih"},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.isValidCube,expression:"isValidCube"}],staticClass:"solution"},[r("div",{ref:"cube-doll",attrs:{id:"cube-doll"}}),t.isCubeSolved?t._e():r("div",{staticClass:"steps"},[r("MultipleStepsSolution",{attrs:{name:"Cross",solution:t.plainSolution.cross}}),r("MultipleStepsSolution",{attrs:{name:"F2L",solution:t.plainSolution.f2l}}),r("MultipleStepsSolution",{attrs:{name:"OLL",solution:[t.plainSolution.oll]}}),r("MultipleStepsSolution",{attrs:{name:"PLL",solution:[t.plainSolution.pll]}})],1)]),r("div",{directives:[{name:"show",rawName:"v-show",value:!t.isValidCube,expression:"!isValidCube"}]},[t._v("Cube invalid!")])])},ue=[],pe=r("5d73"),he=r.n(pe);r("6b54"),r("87b3"),r("3b2b"),r("a481");function ve(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(var e=t.slice(0),r=e.length-1;r>=0;r--)""!==e[r]?e[r]=de(e[r]):e.splice(r,1);return e}function de(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t.replace(new RegExp("prime","g"),"'")}function fe(t){var e=t.cross.join(" ")+" "+t.f2l.join(" ")+" "+t.oll+" "+t.pll;return e=e.replace(new RegExp("prime","g"),"'"),new R(e)}var be=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"name"},[t._v(t._s(t.name)+":")]),r("ul",t._l(t.solution,function(e,o){return r("li",{key:o},[t._v(t._s(e))])}),0)])},ge=[],Ce=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(y["d"]);C["a"]([Object(y["c"])({type:String,default:""})],Ce.prototype,"name",void 0),C["a"]([Object(y["c"])({type:Array,default:function(){return[]}})],Ce.prototype,"solution",void 0),Ce=C["a"]([y["a"]],Ce);var me=Ce,ye=me,Oe=(r("d50b"),Object(a["a"])(ye,be,ge,!1,null,"df0729e0",null)),je=Oe.exports,we=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"name"},[t._v(t._s(t.name)+":")]),r("div",{staticClass:"step"},[t._v(t._s(t.solution))])])},ke=[],xe=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(y["d"]);C["a"]([Object(y["c"])({type:String,default:""})],xe.prototype,"name",void 0),C["a"]([Object(y["c"])({type:String,default:""})],xe.prototype,"solution",void 0),xe=C["a"]([y["a"]],xe);var Se=xe,Te=Se,_e=(r("3715"),Object(a["a"])(Te,we,ke,!1,null,"22b2fbd5",null)),ze=_e.exports,Me=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"beforeDestroy",value:function(){this.$refs["cube-doll"].remove()}},{key:"onSolveMovesChange",value:function(){this.makeCube()}},{key:"mounted",value:function(){this.makeCube()}},{key:"removeCube",value:function(){var t=this.$refs["cube-doll"];while(t.firstChild)t.removeChild(t.firstChild)}},{key:"makeCube",value:function(){this.removeCube();var t="",e=!0,r=!1,o=void 0;try{for(var i,n=he()(this.centers);!(e=(i=n.next()).done);e=!0)for(var a=i.value,l=0;l<9;l++)t+=a[0]}catch(s){r=!0,o=s}finally{try{e||null==n.return||n.return()}finally{if(r)throw o}}var c=this.fullAlg.toString();TTk.AlgorithmPuzzle(3).fc(t).case(c).showAlg(!1).controls(!0).size({width:384,height:384})("#cube-doll")}},{key:"fullAlg",get:function(){return fe(this.plainSolution)}}]),e}(y["d"]);C["a"]([Object(m["d"])("isValidCube")],Me.prototype,"isValidCube",void 0),C["a"]([Object(m["b"])("centers")],Me.prototype,"centers",void 0),C["a"]([Object(m["b"])("plainSolution")],Me.prototype,"plainSolution",void 0),C["a"]([Object(m["b"])("isCubeSolved")],Me.prototype,"isCubeSolved",void 0),C["a"]([Object(y["e"])("plainSolution")],Me.prototype,"onSolveMovesChange",null),Me=C["a"]([Object(y["a"])({name:"FridrihView",components:{MultipleStepsSolution:je,SingleStepsSolution:ze}})],Me);var Re=Me,Pe=Re,$e=(r("2c97"),Object(a["a"])(Pe,se,ue,!1,null,"781244fe",null)),Ie=$e.exports,Ee=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.imageData=null,t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"clear",value:function(){this.clearMutation()}}]),e}(y["d"]);C["a"]([Object(m["d"])(function(t){return t.cubeTriplet1})],Ee.prototype,"cubeTriplet1",void 0),C["a"]([Object(m["d"])(function(t){return t.cubeTriplet2})],Ee.prototype,"cubeTriplet2",void 0),C["a"]([Object(m["d"])(function(t){return t.tripletColor1})],Ee.prototype,"tripletColor1",void 0),C["a"]([Object(m["d"])(function(t){return t.tripletColor2})],Ee.prototype,"tripletColor2",void 0),C["a"]([Object(m["c"])("clear")],Ee.prototype,"clearMutation",void 0),Ee=C["a"]([Object(y["a"])({components:{TripletsView:Jt,WebcamProvider:ee,ImageProvider:ce,FridrihView:Ie}})],Ee);var Ae=Ee,Ve=Ae,De=(r("c298"),Object(a["a"])(Ve,p,h,!1,null,"4ac38451",null)),Ue=De.exports,Ne=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"debug"},[r("div",[r("button",{on:{click:t.clear}},[t._v("Clear")])]),r("WebcamProvider",{ref:"webcam-provider",on:{grab:t.grab}}),r("Debug",{attrs:{image:t.imageData},on:{request:t.makeSnapshot}})],1)},Fe=[],Ge=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._m(0),r("RawTripletsView")],1)},Le=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("canvas",{attrs:{id:"source",width:"128",height:"128"}}),r("canvas",{attrs:{id:"mask",width:"128",height:"128"}}),r("canvas",{attrs:{id:"contour",width:"128",height:"128"}})])}],qe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("TripletView",{directives:[{name:"show",rawName:"v-show",value:t.cubeTriplet1,expression:"cubeTriplet1"}],attrs:{triplet:t.cubeTriplet1}}),r("ColorView",{attrs:{tripletIndex:0,tripletColors:t.tripletColor1,triplet:t.cubeTriplet1}}),r("TripletView",{directives:[{name:"show",rawName:"v-show",value:t.cubeTriplet2,expression:"cubeTriplet2"}],attrs:{triplet:t.cubeTriplet2}}),r("ColorView",{attrs:{tripletIndex:1,tripletColors:t.tripletColor2,triplet:t.cubeTriplet2}})],1)},He=[],We=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("canvas",{ref:"left",attrs:{width:"128",height:"128"}}),r("canvas",{ref:"top",attrs:{width:"128",height:"128"}}),r("canvas",{ref:"right",attrs:{width:"128",height:"128"}})])},Be=[],Je=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"draw",value:function(){if(null!==this.triplet)cv.imshow(this.$refs.left,this.triplet.left),cv.imshow(this.$refs.top,this.triplet.top),cv.imshow(this.$refs.right,this.triplet.right);else{var t=this.$refs.left.width;this.clearCanvas(this.$refs.left,t),this.clearCanvas(this.$refs.top,t),this.clearCanvas(this.$refs.right,t)}}},{key:"clearCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=t.getContext("2d");r&&r.clearRect(0,0,e,e)}}]),e}(y["d"]);C["a"]([Object(y["c"])(z)],Je.prototype,"triplet",void 0),C["a"]([Object(y["e"])("triplet")],Je.prototype,"draw",null),Je=C["a"]([y["a"]],Je);var Xe=Je,Ye=Xe,Ke=Object(a["a"])(Ye,We,Be,!1,null,null,null),Qe=Ke.exports,Ze=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticStyle:{display:"inline-flex"}},[r("SideStickers",{attrs:{size:128,colors:t.leftColors},on:{change:t.changeColors}}),r("SideStickers",{attrs:{size:128,colors:t.topColors},on:{change:t.changeColors}}),r("SideStickers",{attrs:{size:128,colors:t.rightColors},on:{change:t.changeColors}})],1)])},tr=[];function er(t){return t.map(function(t,e){return[t,e]}).reduce(function(t,e){return e[0]>t[0]?e:t})[1]}var rr=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.leftColors=[],t.rightColors=[],t.topColors=[],t.colors={0:"blue",1:"green",2:"orange",3:"red",4:"white",5:"yellow"},t.dsize=new cv.Size(32,32),t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){this.initColors()}},{key:"onTripletColorsChange",value:function(){this.initColors()}},{key:"initColors",value:function(){if(null===this.tripletColors)return this.leftColors=[],this.rightColors=[],void(this.topColors=[]);this.leftColors=this.tripletColors.left.slice(0),this.rightColors=this.tripletColors.right.slice(0),this.topColors=this.tripletColors.top.slice(0)}},{key:"changeColors",value:function(t){var e=t.prop,r=t.index,o=t.value;this.$set(e,r,o),this.setTripletColor({index:this.tripletIndex,triplet:new M({left:this.leftColors,right:this.rightColors,top:this.topColors})})}},{key:"draw",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(null===this.triplet){t.next=18;break}return console.log("Start recognize"),this.triplet.left,t.next=5,this.recognizeSide(this.triplet.left);case 5:return this.leftColors=t.sent,console.log("Recognized: ",1),t.next=9,this.recognizeSide(this.triplet.right);case 9:return this.rightColors=t.sent,console.log("Recognized: ",2),t.next=13,this.recognizeSide(this.triplet.top);case 13:this.topColors=t.sent,console.log("Recognized: ",3),this.setTripletColor({index:this.tripletIndex,triplet:new M({left:this.leftColors,right:this.rightColors,top:this.topColors})}),t.next=18;break;case 18:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"drawTriplet",value:function(){this.drawColorSide(this.$refs.left,this.leftColors),this.drawColorSide(this.$refs.top,this.topColors),this.drawColorSide(this.$refs.right,this.rightColors)}},{key:"drawColorSide",value:function(t,e){var r=t.getContext("2d");if(null!==r)for(var o=Math.round(128/3)-1,i=0;i<3;i++)for(var n=0;n<3;n++)r.fillStyle=e[3*i+n],r.fillRect(n*o,i*o,o,o)}},{key:"recognizeSide",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(e){var r,o,i,n,a,l,c,s,u,p,h=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:r=h.length>1&&void 0!==h[1]?h[1]:Math.round(128/3)-1,o=[],i=new cv.Mat,n=0;case 4:if(!(n<3)){t.next=25;break}a=0;case 6:if(!(a<3)){t.next=22;break}return l=new cv.Rect(a*r,n*r,r,r),i=e.roi(l),cv.cvtColor(i,i,cv.COLOR_RGBA2RGB,0),c=new cv.Mat,cv.resize(i,c,this.dsize,0,0,cv.INTER_AREA),t.next=14,this.recognizeColor(c);case 14:s=t.sent,u=Array.prototype.slice.call(s),p=er(u),o.push(this.getColorName(p)),c.delete();case 19:a++,t.next=6;break;case 22:n++,t.next=4;break;case 25:return i.delete(),t.abrupt("return",o);case 27:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getColorName",value:function(t){return this.colors[t]}},{key:"clearCanvas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=t.getContext("2d");r&&r.clearRect(0,0,e,e)}}]),e}(y["d"]);C["a"]([Object(y["c"])(z)],rr.prototype,"triplet",void 0),C["a"]([Object(y["c"])(M)],rr.prototype,"tripletColors",void 0),C["a"]([Object(y["c"])(Number)],rr.prototype,"tripletIndex",void 0),C["a"]([Object(m["c"])("setTripletColor")],rr.prototype,"setTripletColor",void 0),C["a"]([Object(m["a"])("recognizeColor")],rr.prototype,"recognizeColor",void 0),C["a"]([Object(y["e"])("tripletColors")],rr.prototype,"onTripletColorsChange",null),C["a"]([Object(y["e"])("triplet")],rr.prototype,"draw",null),rr=C["a"]([Object(y["a"])({components:{CubeColorSide:ct,SideStickers:xt}})],rr);var or=rr,ir=or,nr=Object(a["a"])(ir,Ze,tr,!1,null,null,null),ar=nr.exports,lr=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"onTripletColor1Update",value:function(){this.resolve()}},{key:"onTripletColor2Update",value:function(){this.resolve()}},{key:"mounted",value:function(){this.resolve()}},{key:"resolve",value:function(){this.resolvePuzzle()}}]),e}(y["d"]);C["a"]([Object(m["d"])(function(t){return t.cubeTriplet1})],lr.prototype,"cubeTriplet1",void 0),C["a"]([Object(m["d"])(function(t){return t.cubeTriplet2})],lr.prototype,"cubeTriplet2",void 0),C["a"]([Object(m["d"])(function(t){return t.tripletColor1})],lr.prototype,"tripletColor1",void 0),C["a"]([Object(m["d"])(function(t){return t.tripletColor2})],lr.prototype,"tripletColor2",void 0),C["a"]([Object(m["a"])("resolvePuzzle")],lr.prototype,"resolvePuzzle",void 0),C["a"]([Object(y["e"])("tripletColor1")],lr.prototype,"onTripletColor1Update",null),C["a"]([Object(y["e"])("tripletColor2")],lr.prototype,"onTripletColor2Update",null),lr=C["a"]([Object(y["a"])({components:{TripletView:Qe,ColorView:ar}})],lr);var cr=lr,sr=cr,ur=Object(a["a"])(sr,qe,He,!1,null,null,null),pr=ur.exports,hr=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.video=null,t.webcamStream=null,t.imageCapture=null,t.sourceCanvas=null,t.contourCanvas=null,t.maskCanvas=null,t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"onImageChanged",value:function(){if(null!==this.image){var t=new cv.Mat,e=new cv.Size(128,128);cv.resize(this.image,t,e,0,0,cv.INTER_AREA),cv.imshow(this.sourceCanvas,t),this.recognize()}}},{key:"mounted",value:function(){this.sourceCanvas=document.querySelector("#source"),this.contourCanvas=document.querySelector("#contour"),this.maskCanvas=document.querySelector("#mask")}},{key:"recognize",value:function(){var t=this;this.recognizeCube(this.image).then(function(e){var r=e.maskData,o=e.centerData,i=e.leftData,n=e.topData,a=e.rightData;null===t.cubeTriplet1?t.setCubeTriplet1({triplet:new z(i,a,n)}):t.setCubeTriplet2({triplet:new z(i,a,n)}),cv.imshow(t.contourCanvas,r),cv.imshow(t.maskCanvas,o)}).catch(function(e){(e instanceof L||e instanceof G)&&(console.log(e),t.$emit("request"))})}}]),e}(y["d"]);C["a"]([Object(y["c"])(Object)],hr.prototype,"image",void 0),C["a"]([Object(m["d"])(function(t){return t.cubeTriplet1})],hr.prototype,"cubeTriplet1",void 0),C["a"]([Object(m["d"])(function(t){return t.cubeTriplet1})],hr.prototype,"cubeTriplet2",void 0),C["a"]([Object(m["a"])("recognizeCube")],hr.prototype,"recognizeCube",void 0),C["a"]([Object(m["c"])("setCubeTriplet1")],hr.prototype,"setCubeTriplet1",void 0),C["a"]([Object(m["c"])("setCubeTriplet2")],hr.prototype,"setCubeTriplet2",void 0),C["a"]([Object(y["e"])("image")],hr.prototype,"onImageChanged",null),hr=C["a"]([Object(y["a"])({components:{RawTripletsView:pr}})],hr);var vr=hr,dr=vr,fr=(r("9025"),Object(a["a"])(dr,Ge,Le,!1,null,null,null)),br=fr.exports,gr=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.imageData=null,t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"grab",value:function(t){console.log("grab"),this.imageData=t}},{key:"makeSnapshot",value:function(){this.$refs["webcam-provider"].snapshot()}},{key:"clear",value:function(){this.clearMutation()}}]),e}(y["d"]);C["a"]([Object(m["c"])("clear")],gr.prototype,"clearMutation",void 0),gr=C["a"]([Object(y["a"])({components:{Debug:br,WebcamProvider:ee,ImageProvider:ce}})],gr);var Cr=gr,mr=Cr,yr=Object(a["a"])(mr,Ne,Fe,!1,null,null,null),Or=yr.exports,jr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{display:"flex","justify-content":"center"}},[r("SideStickers",{attrs:{colors:t.colors1}})],1)},wr=[],kr=function(t){function e(){var t;return Object(v["a"])(this,e),t=Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments)),t.colors1=[],t.colors=["green","red","blue","orange","yellow","white"],t}return Object(g["a"])(e,t),Object(d["a"])(e,[{key:"created",value:function(){for(var t=0;t<9;t++){var e=Math.floor(6*Math.random())+0;this.colors1.push(this.colors[e])}}}]),e}(y["d"]);kr=C["a"]([Object(y["a"])({components:{SideStickers:xt}})],kr);var xr=kr,Sr=xr,Tr=Object(a["a"])(Sr,jr,wr,!1,null,null,null),_r=Tr.exports,zr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"test"},[r("div",[r("Triplet",{attrs:{cubeTriplet1:t.cubeTriplet1,tripletColor1:t.tripletColor1,cubeTriplet2:t.cubeTriplet2,tripletColor2:t.tripletColor2}})],1)])},Mr=[],Rr=function(t){function e(){return Object(v["a"])(this,e),Object(f["a"])(this,Object(b["a"])(e).apply(this,arguments))}return Object(g["a"])(e,t),e}(y["d"]);C["a"]([Object(m["d"])(function(t){return t.cubeTriplet1})],Rr.prototype,"cubeTriplet1",void 0),C["a"]([Object(m["d"])(function(t){return t.cubeTriplet2})],Rr.prototype,"cubeTriplet2",void 0),C["a"]([Object(m["d"])(function(t){return t.tripletColor1})],Rr.prototype,"tripletColor1",void 0),C["a"]([Object(m["d"])(function(t){return t.tripletColor2})],Rr.prototype,"tripletColor2",void 0),Rr=C["a"]([Object(y["a"])({name:"TestPage",components:{FridrihView:Ie,Triplet:Jt}})],Rr);var Pr=Rr,$r=Pr,Ir=Object(a["a"])($r,zr,Mr,!1,null,null,null),Er=Ir.exports;o["default"].use(u["a"]);var Ar=new u["a"]({routes:[{path:"/test",name:"test",component:Er},{path:"/",name:"home",component:Ue},{path:"/debug",name:"debug",component:Or},{path:"/colors",name:"colors",component:_r},{path:"/about",name:"about",component:function(){return r.e("about").then(r.bind(null,"f820"))}}]}),Vr=(r("6c7b"),r("cebc")),Dr=r("2f62"),Ur=r("2b94"),Nr=r.n(Ur),Fr=function t(){Object(v["a"])(this,t)};function Gr(t){return t[4]}function Lr(t,e){var r="",o=!0,i=!1,n=void 0;try{for(var a,l=he()(e);!(o=(a=l.next()).done);o=!0){var c=a.value;r+=t[c]}}catch(s){i=!0,n=s}finally{try{o||null==l.return||l.return()}finally{if(i)throw n}}return r}function qr(t){var e=t.left.slice(0),r=t.right.slice(0);e.reverse(),r.reverse();var o=[t.top[6],t.top[3],t.top[0],t.top[7],t.top[4],t.top[1],t.top[8],t.top[5],t.top[2]];return new M({left:e,right:r,top:o})}function Hr(t,e){var r={},o=t,i=e,n=Gr(o.left),a=Gr(o.right),l=Gr(o.top),c=Gr(i.left),s=Gr(i.right),u=Gr(i.top);r[n]="f",r[a]="r",r[l]="u",r[c]="l",r[s]="b",r[u]="d";var p=qr(i),h=Lr(r,o.left),v=Lr(r,o.right),d=Lr(r,o.top),f=Lr(r,p.left),b=Lr(r,p.right),g=Lr(r,p.top),C=[h,v,d,g,f,b].join(""),m=null;try{m=Nr()(C,{partitioned:!0})}catch(y){throw new Fr}return m}var Wr=function(){function t(e){Object(v["a"])(this,t),this.isInit=!1,this.src=new cv.Mat,this.dst=new cv.Mat,this.config=e}return Object(d["a"])(t,[{key:"init",value:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,tf.loadModel(this.config.colorModelPath);case 2:this.model=t.sent,this.isInit=!0,console.log("color model loaded!");case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()},{key:"predict",value:function(t){var e=this,r=this.config.colorModelInputSize;return new k.a(function(){var o=Object(x["a"])(regeneratorRuntime.mark(function o(i,n){var a,l,c,s,u;return regeneratorRuntime.wrap(function(o){while(1)switch(o.prev=o.next){case 0:return console.time("Color model"),a=tf.tensor3d(t.data,[r,r,3]),l=a.expandDims(0),c=l.toFloat().div(255),s=e.model.predict(c),o.next=7,s.data();case 7:u=o.sent,console.timeEnd("Color model"),i(u);case 10:case"end":return o.stop()}},o)}));return function(t,e){return o.apply(this,arguments)}}())}}]),t}(),Br={segmentationModelPath:"models/seg-128/model.json",colorModelPath:"models/color/model.json",segmentationModelInputSize:128,colorModelInputSize:32,maxHexagonAngle:12},Jr={configuration:Br,cubeRecognizer:new q(Br),colorRecognizer:new Wr(Br),cubeTriplet1:null,cubeTriplet2:null,tripletColor1:new M({left:Array(9).fill("blue"),right:Array(9).fill("red"),top:Array(9).fill("yellow")}),tripletColor2:new M({left:Array(9).fill("orange"),right:Array(9).fill("green"),top:Array(9).fill("white")}),solveMoves:null,isValidCube:!0},Xr=Object(Vr["a"])({},Jr),Yr=Xr;o["default"].use(Dr["a"]);var Kr=Object(Vr["a"])({},Yr),Qr={setCubeTriplet1:function(t,e){var r=e.triplet;t.cubeTriplet1=r},setCubeTriplet2:function(t,e){var r=e.triplet;t.cubeTriplet2=r},clear:function(t){t.cubeTriplet1=null,t.cubeTriplet2=null,t.tripletColor1=new M({left:Array(9).fill("blue"),right:Array(9).fill("red"),top:Array(9).fill("yellow")}),t.tripletColor2=new M({left:Array(9).fill("orange"),right:Array(9).fill("green"),top:Array(9).fill("white")}),t.isValidCube=!0},setTripletColor:function(t,e){var r=e.index,o=e.triplet;0===r?t.tripletColor1=o:t.tripletColor2=o},setSolveMoves:function(t,e){var r=e.moves;t.solveMoves=r},setCubeValidationStatus:function(t,e){var r=e.isValid;t.isValidCube=r}},Zr={recognizeCube:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(e,r){var o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.state,e.commit,o.cubeRecognizer.isInit){t.next=4;break}return t.next=4,o.cubeRecognizer.init();case 4:return t.next=6,o.cubeRecognizer.predict(r);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}(),recognizeColor:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(e,r){var o,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(o=e.state,e.commit,o.colorRecognizer.isInit){t.next=4;break}return t.next=4,o.colorRecognizer.init();case 4:return t.next=6,o.colorRecognizer.predict(r);case 6:return i=t.sent,t.abrupt("return",i);case 8:case"end":return t.stop()}},t)}));function e(e,r){return t.apply(this,arguments)}return e}(),resolvePuzzle:function(){var t=Object(x["a"])(regeneratorRuntime.mark(function t(e){var r,o,i,n,a,l,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return r=e.state,o=e.commit,i=r.tripletColor1,n=r.tripletColor2,t.prev=2,t.next=5,Hr(i,n);case 5:a=t.sent,l=!0,o("setSolveMoves",{moves:a}),o("setCubeValidationStatus",{isValid:l}),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),t.t0 instanceof Fr&&(c=!1,o("setCubeValidationStatus",{isValid:c}));case 14:case"end":return t.stop()}},t,null,[[2,11]])}));function e(e){return t.apply(this,arguments)}return e}()},to={centers:function(t){if(null===t.tripletColor1||null===t.tripletColor2)return[];var e=[t.tripletColor2.top[4],t.tripletColor1.right[4],t.tripletColor1.left[4],t.tripletColor1.top[4],t.tripletColor2.left[4],t.tripletColor2.right[4]];return e},plainSolution:function(t){var e=t.solveMoves,r={cross:ve(e.cross),f2l:ve(e.f2l),oll:de(e.oll),pll:de(e.pll)};return r},isCubeSolved:function(t,e){var r=e.plainSolution;return 0===r.cross.length&&0===r.f2l.length&&0===r.oll.length&&0===r.pll.length}},eo=new Dr["a"].Store({state:Kr,mutations:Qr,actions:Zr,getters:to});o["default"].config.productionTip=!1,new o["default"]({router:Ar,store:eo,render:function(t){return t(s)}}).$mount("#app")},cdc7:function(t,e,r){},d50b:function(t,e,r){"use strict";var o=r("c1dd"),i=r.n(o);i.a},d60d:function(t,e,r){"use strict";var o=r("ff83"),i=r.n(o);i.a},e3b9:function(t,e,r){"use strict";var o=r("8630"),i=r.n(o);i.a},e5de:function(t,e,r){"use strict";var o=r("5f67"),i=r.n(o);i.a},ed08:function(t,e,r){"use strict";var o=r("2db8"),i=r.n(o);i.a},ff83:function(t,e,r){}});
//# sourceMappingURL=app.e5b7d0ec.js.map